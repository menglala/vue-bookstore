webpackJsonp([1],{"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},"92Iq":function(t,e){},Dd8w:function(t,e,o){"use strict";e.__esModule=!0;var n,a=o("woOf"),r=(n=a)&&n.__esModule?n:{default:n};e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},R4wc:function(t,e,o){var n=o("kM2E");n(n.S+n.F,"Object",{assign:o("To3L")})},"SC/i":function(t,e,o){"use strict";var n={name:"loading",props:{isLoading:{type:Boolean,default:!0}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return this.isLoading?e("img",{staticClass:"loading",attrs:{src:o("rQNc")}}):this._e()},staticRenderFns:[]};var r=o("VU/8")(n,a,!1,function(t){o("92Iq")},"data-v-491619ac",null);e.a=r.exports},To3L:function(t,e,o){"use strict";var n=o("lktj"),a=o("1kS7"),r=o("NpIQ"),s=o("sB3e"),i=o("MU5D"),c=Object.assign;t.exports=!c||o("S82l")(function(){var t={},e={},o=Symbol(),n="abcdefghijklmnopqrst";return t[o]=7,n.split("").forEach(function(t){e[t]=t}),7!=c({},t)[o]||Object.keys(c({},e)).join("")!=n})?function(t,e){for(var o=s(t),c=arguments.length,l=1,u=a.f,f=r.f;c>l;)for(var d,v=i(arguments[l++]),p=u?n(v).concat(u(v)):n(v),h=p.length,b=0;h>b;)f.call(v,d=p[b++])&&(o[d]=v[d]);return o}:c},V3tA:function(t,e,o){o("R4wc"),t.exports=o("FeBl").Object.assign},laJ0:function(t,e){},pjeT:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Xxa5"),a=o.n(n),r=o("Gu7T"),s=o.n(r),i=o("exGp"),c=o.n(i),l=o("Dd8w"),u=o.n(l),f=o("+WBB"),d=o("gyMJ"),v=o("NYxO"),p=o("Du/2"),h=o("SC/i"),b={name:"list",components:{storehead:f.a,loading:h.a},data:function(){return{books:[],isLoading:!0,offset:0,hasMore:!0,load:!1}},created:function(){this.getData()},mounted:function(){var t=this,e=this.$refs.drop,o=e.offsetTop,n=0;e.addEventListener("touchstart",function(a){var r=a.touches[0].pageY,s=!1,i=function t(a){if(0==e.scrollTop&&e.offsetTop==o){var i=a.touches[0].pageY;s=!0,(n=i-r)>=0?n>50?(n=50,e.style.top=o+50+"px"):e.style.top=o+n+"px":(e.removeEventListener("touchmove",t),e.removeEventListener("touchend",c))}},c=function a(r){s&&(clearInterval(t.timer),t.timer=setInterval(function(r){if(n<=0)return clearInterval(t.timer),e.style.top=o+"px",console.log("获取数据"),e.removeEventListener("touchmove",i),e.removeEventListener("touchend",a),t.books=[],t.hasMore=!0,t.offset=0,void t.getData();n--,e.style.top=o+n+"px"},1),e.removeEventListener("touchmove",i),e.removeEventListener("touchend",a))};e.addEventListener("touchmove",i,!1),e.addEventListener("touchend",c,!1)},!1)},methods:u()({getData:function(){var t=this;return c()(a.a.mark(function e(){var o,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoading=!1,!t.hasMore||t.load){e.next=12;break}return t.load=!0,e.next=5,Object(d.d)(t.offset);case 5:o=e.sent,n=o.books,r=o.hasMore,t.hasMore=r,t.books=[].concat(s()(t.books),s()(n)),t.offset=t.books.length,t.load=!1;case 12:case"end":return e.stop()}},e,t)}))()},loadMove:function(){var t=this.$refs.drop,e=t.scrollTop,o=t.scrollHeight;e+t.clientHeight+20>o&&this.getData()},remove:function(t){Object(d.e)(t),this.books=this.books.filter(function(e){return e.bookId!==t})}},Object(v.c)([p.a]),{add:function(t){this[p.a](t)}}),filters:{toFixed:function(t,e){return"￥"+t.toFixed(e)}},watch:{$route:function(){this.getData()}}},g={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"box"},[o("storehead",{attrs:{flag:!0}},[t._v("列表")]),t._v(" "),o("div",{ref:"drop",staticClass:"content",on:{scroll:t.loadMove}},[o("ul",t._l(t.books,function(e,n){return o("router-link",{key:n,attrs:{to:{name:"detail",params:{bid:e.bookId}},tag:"li"}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bookCover,expression:"book.bookCover"}]}),t._v(" "),o("div",{staticClass:"list-data"},[o("h4",[t._v(t._s(e.bookName))]),t._v(" "),o("span",[t._v(t._s(e.bookInfo))]),o("br"),t._v(" "),o("strong",[t._v(t._s(t._f("toFixed")(e.bookPrice,2)))]),o("br"),t._v(" "),o("i",{staticClass:"iconfont icon-shanchu",on:{click:function(o){o.stopPropagation(),t.remove(e.bookId)}}}),t._v(" "),o("i",{staticClass:"iconfont icon-shoucang",on:{click:function(o){o.stopPropagation(),t.add(e)}}})])])})),t._v(" "),o("p",{staticClass:"loadMove",on:{click:t.getData}},[t._v("加载更多")]),t._v(" "),o("loading",{attrs:{isLoading:t.isLoading}})],1)],1)},staticRenderFns:[]};var m=o("VU/8")(b,g,!1,function(t){o("laJ0")},"data-v-94d0aa8e",null);e.default=m.exports},rQNc:function(t,e,o){t.exports=o.p+"static/img/loading-bar-scribble-animation-doodle-cartoon-4k_sdfqzybaux_thumbnail-full05.7ea0777.png"},woOf:function(t,e,o){t.exports={default:o("V3tA"),__esModule:!0}}});
//# sourceMappingURL=1.c5ebaf90cfdb65606cfd.js.map